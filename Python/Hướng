
def chatbot_tu_van():
    chatbot_window = tk.Toplevel(root)
    chatbot_window.title("AI Financial Advisor - Trá»£ lÃ½ tÃ i chÃ­nh thÃ´ng minh")
    chatbot_window.geometry("600x700")
    chatbot_window.configure(bg="#F0F8FF")
    chatbot_window.transient(root)
    chatbot_window.grab_set()

    # CÄƒn giá»¯a cá»­a sá»•
    chatbot_window.update_idletasks()
    x = (chatbot_window.winfo_screenwidth() // 2) - (600 // 2)
    y = (chatbot_window.winfo_screenheight() // 2) - (700 // 2)
    chatbot_window.geometry(f"600x700+{x}+{y}")

    # Header
    header_frame = tk.Frame(chatbot_window, bg="#4FC3A1", height=80)
    header_frame.pack(fill=tk.X)
    header_frame.pack_propagate(False)

    tk.Label(header_frame, text="ğŸ¤– TRá»¢ LÃ TÃ€I CHÃNH AI THÃ”NG MINH",
             font=("Segoe UI", 16, "bold"), bg="#4FC3A1", fg="white").pack(pady=20)

    # Hiá»ƒn thá»‹ tin nháº¯n
    chat_frame = tk.Frame(chatbot_window, bg="#F0F8FF")
    chat_frame.pack(fill=tk.BOTH, expand=True, padx=20, pady=10)

    # Canvas vá»›i scrollbar cho chat
    canvas = tk.Canvas(chat_frame, bg="#F0F8FF", highlightthickness=0)
    scrollbar = ttk.Scrollbar(chat_frame, orient="vertical", command=canvas.yview)
    scrollable_frame = tk.Frame(canvas, bg="#F0F8FF")

    scrollable_frame.bind(
        "<Configure>",
        lambda e: canvas.configure(scrollregion=canvas.bbox("all"))
    )

    canvas.create_window((0, 0), window=scrollable_frame, anchor="nw")
    canvas.configure(yscrollcommand=scrollbar.set)

    # Khung nháº­p tin nháº¯n
    input_frame = tk.Frame(chatbot_window, bg="#F0F8FF", height=80)
    input_frame.pack(fill=tk.X, padx=20, pady=10)
    input_frame.pack_propagate(False)

    # Äá»ŠNH NGHÄ¨A BIáº¾N TRÆ¯á»šC KHI Sá»¬ Dá»¤NG
    chat_container = scrollable_frame
    entry_msg = tk.Entry(input_frame, font=FONT_NORMAL, relief=tk.FLAT, bd=2)

    def add_message(sender, message, is_user=False):
        """ThÃªm tin nháº¯n vÃ o khung chat"""
        message_frame = tk.Frame(chat_container, bg="#F0F8FF")
        message_frame.pack(fill=tk.X, pady=5)

        if is_user:
            # Tin nháº¯n ngÆ°á»i dÃ¹ng (bÃªn pháº£i)
            msg_label = tk.Label(message_frame, text=message,
                                 font=FONT_NORMAL, bg="#DCF8C6",
                                 fg="#333333", justify=tk.LEFT,
                                 wraplength=400, padx=15, pady=10)
            msg_label.pack(side=tk.RIGHT, padx=10)
            tk.Label(message_frame, text="ğŸ‘¤", bg="#F0F8FF",
                     font=("Arial", 12)).pack(side=tk.RIGHT)
        else:
            # Tin nháº¯n bot (bÃªn trÃ¡i)
            tk.Label(message_frame, text="ğŸ¤–", bg="#F0F8FF",
                     font=("Arial", 12)).pack(side=tk.LEFT)
            msg_label = tk.Label(message_frame, text=message,
                                 font=FONT_NORMAL, bg="#FFFFFF",
                                 fg="#333333", justify=tk.LEFT,
                                 wraplength=400, padx=15, pady=10)
            msg_label.pack(side=tk.LEFT, padx=10)

        # Cuá»™n xuá»‘ng dÆ°á»›i cÃ¹ng
        canvas.update_idletasks()
        canvas.yview_moveto(1.0)

    def send_message():
        """Xá»­ lÃ½ tin nháº¯n ngÆ°á»i dÃ¹ng gá»­i"""
        message = entry_msg.get().strip()
        if not message:
            return

        # Hiá»ƒn thá»‹ tin nháº¯n ngÆ°á»i dÃ¹ng
        add_message("user", message, is_user=True)
        entry_msg.delete(0, tk.END)

        # Xá»­ lÃ½ vÃ  tráº£ lá»i vá»›i AI thá»±c sá»±
        response = process_with_ai(message)
        add_message("bot", response, is_user=False)

    def quick_response(question):
        """Xá»­ lÃ½ cÃ¢u há»i nhanh tá»« nÃºt"""
        add_message("user", question, is_user=True)
        response = process_with_ai(question)
        add_message("bot", response, is_user=False)

    # ========== AI THá»°C Sá»° Vá»šI MACHINE LEARNING ==========

    def get_user_spending_data():
        """Láº¥y dá»¯ liá»‡u chi tiÃªu cá»§a user Ä‘á»ƒ phÃ¢n tÃ­ch"""
        try:
            conn = get_connection()
            query = """
                SELECT Ngay, Danh_muc, So_tien, Ghi_chu 
                FROM ChiTieu 
                WHERE UserID = %s 
                ORDER BY Ngay
            """
            df = pd.read_sql(query, conn, params=[current_user_id])
            conn.close()

            if df.empty:
                return None

            # Chuyá»ƒn Ä‘á»•i kiá»ƒu dá»¯ liá»‡u
            df['Ngay'] = pd.to_datetime(df['Ngay'])
            df['So_tien'] = pd.to_numeric(df['So_tien'])
            df['Thang'] = df['Ngay'].dt.to_period('M')
            df['Ngay_trong_tuan'] = df['Ngay'].dt.dayofweek
            df['Ngay_trong_thang'] = df['Ngay'].dt.day

            return df
        except Exception as e:
            print(f"Lá»—i khi láº¥y dá»¯ liá»‡u: {e}")
            return None

    def predict_future_spending():
        """Dá»± Ä‘oÃ¡n chi tiÃªu trong tÆ°Æ¡ng lai báº±ng Linear Regression"""
        df = get_user_spending_data()
        if df is None or len(df) < 10:
            return "ğŸ¤” Cáº§n thÃªm dá»¯ liá»‡u chi tiÃªu (Ã­t nháº¥t 10 giao dá»‹ch) Ä‘á»ƒ dá»± Ä‘oÃ¡n tÆ°Æ¡ng lai!"

        try:
            # Chuáº©n bá»‹ dá»¯ liá»‡u cho mÃ´ hÃ¬nh
            monthly_data = df.groupby('Thang')['So_tien'].sum().reset_index()
            monthly_data['Thang_so'] = range(len(monthly_data))

            X = monthly_data[['Thang_so']]
            y = monthly_data['So_tien']

            # Huáº¥n luyá»‡n mÃ´ hÃ¬nh Linear Regression
            model = LinearRegression()
            model.fit(X, y)

            # Dá»± Ä‘oÃ¡n 3 thÃ¡ng tiáº¿p theo
            future_months = [[len(monthly_data)], [len(monthly_data) + 1], [len(monthly_data) + 2]]
            predictions = model.predict(future_months)

            response = "ğŸ”® **Dá»° ÄOÃN CHI TIÃŠU 3 THÃNG Tá»šI:**\n\n"
            months = ["ThÃ¡ng sau", "2 thÃ¡ng tá»›i", "3 thÃ¡ng tá»›i"]

            for i, (month, pred) in enumerate(zip(months, predictions)):
                trend = "â†—ï¸ TÄƒng" if pred > y.mean() else "â†˜ï¸ Giáº£m"
                response += f"â€¢ {month}: {format_currency(pred)} ({trend})\n"

            # PhÃ¢n tÃ­ch xu hÆ°á»›ng
            trend_slope = model.coef_[0]
            if trend_slope > 0:
                trend_analysis = f"ğŸ“ˆ Xu hÆ°á»›ng tÄƒng: +{format_currency(trend_slope)}/thÃ¡ng"
            else:
                trend_analysis = f"ğŸ“‰ Xu hÆ°á»›ng giáº£m: {format_currency(trend_slope)}/thÃ¡ng"

            response += f"\n{trend_analysis}"
            return response

        except Exception as e:
            return f"âŒ Lá»—i dá»± Ä‘oÃ¡n: {str(e)}"

    def analyze_spending_patterns():
        """PhÃ¢n tÃ­ch máº«u chi tiÃªu cÆ¡ báº£n (fallback khi khÃ´ng Ä‘á»§ dá»¯ liá»‡u cho AI)"""
        try:
            conn = get_connection()
            cursor = conn.cursor()

            # Láº¥y tá»•ng chi theo danh má»¥c
            cursor.execute("""
                SELECT Danh_muc, SUM(So_tien) as Tong, COUNT(*) as So_luong
                FROM ChiTieu 
                WHERE UserID = %s 
                GROUP BY Danh_muc 
                ORDER BY Tong DESC
            """, (current_user_id,))

            categories = cursor.fetchall()
            conn.close()

            if not categories:
                return "ğŸ¤” Báº¡n chÆ°a cÃ³ chi tiÃªu nÃ o Ä‘á»ƒ phÃ¢n tÃ­ch. HÃ£y báº¯t Ä‘áº§u thÃªm chi tiÃªu!"

            total_all = sum(float(row[1]) for row in categories)
            response = "ğŸ“Š **PHÃ‚N TÃCH CHI TIÃŠU Cá»¦A Báº N:**\n\n"

            for category, total, count in categories:
                percentage = (float(total) / total_all) * 100
                response += f"â€¢ {category}: {format_currency(total)} ({percentage:.1f}%)\n"
                response += f"  â”” {count} giao dá»‹ch\n"

            # TÃ¬m danh má»¥c chi nhiá»u nháº¥t
            top_category = categories[0]
            response += f"\nğŸ’¡ **NHáº¬N XÃ‰T:** Báº¡n chi nhiá»u nháº¥t cho {top_category[0]} ({format_currency(top_category[1])})"

            return response

        except Exception as e:
            return f"âŒ Lá»—i khi phÃ¢n tÃ­ch: {str(e)}"

    def analyze_spending_patterns_ml():
        """PhÃ¢n tÃ­ch máº«u chi tiÃªu báº±ng K-Means Clustering"""
        df = get_user_spending_data()
        if df is None or len(df) < 15:
            return analyze_spending_patterns()  # Fallback vá» phÆ°Æ¡ng phÃ¡p cÅ©

        try:
            # Chuáº©n bá»‹ dá»¯ liá»‡u cho clustering
            features = df[['So_tien', 'Ngay_trong_tuan', 'Ngay_trong_thang']]
            scaler = StandardScaler()
            features_scaled = scaler.fit_transform(features)

            # PhÃ¢n cá»¥m vá»›i K-Means
            kmeans = KMeans(n_clusters=min(3, len(df) // 5), random_state=42)
            df['Cluster'] = kmeans.fit_predict(features_scaled)

            # PhÃ¢n tÃ­ch cÃ¡c cá»¥m
            response = "ğŸ¯ **PHÃ‚N TÃCH MáºªU CHI TIÃŠU (AI):**\n\n"

            for cluster_idx in df['Cluster'].unique():
                cluster_data = df[df['Cluster'] == cluster_idx]
                avg_amount = cluster_data['So_tien'].mean()
                common_category = cluster_data['Danh_muc'].mode()[0] if not cluster_data[
                    'Danh_muc'].mode().empty else "Äa dáº¡ng"
                common_day = cluster_data['Ngay_trong_tuan'].mode()[0]

                day_names = ["Thá»© 2", "Thá»© 3", "Thá»© 4", "Thá»© 5", "Thá»© 6", "Thá»© 7", "Chá»§ nháº­t"]

                response += f"**NhÃ³m {cluster_idx + 1}:**\n"
                response += f"â€¢ Sá»‘ tiá»n TB: {format_currency(avg_amount)}\n"
                response += f"â€¢ Danh má»¥c chÃ­nh: {common_category}\n"
                response += f"â€¢ NgÃ y hay chi: {day_names[common_day]}\n"
                response += f"â€¢ Sá»‘ giao dá»‹ch: {len(cluster_data)}\n\n"

            # TÃ¬m insight Ä‘áº·c biá»‡t
            if len(df['Cluster'].unique()) > 1:
                largest_cluster = df['Cluster'].value_counts().index[0]
                largest_data = df[df['Cluster'] == largest_cluster]
                insight_category = largest_data['Danh_muc'].mode()[0]
                insight_amount = largest_data['So_tien'].mean()

                response += f"ğŸ’¡ **INSIGHT:** Báº¡n thÆ°á»ng chi {format_currency(insight_amount)} cho {insight_category}"

            return response

        except Exception as e:
            return f"âŒ Lá»—i phÃ¢n tÃ­ch AI: {str(e)}"

    def detect_spending_anomalies_ml():
        """PhÃ¡t hiá»‡n báº¥t thÆ°á»ng báº±ng phÆ°Æ¡ng phÃ¡p thá»‘ng kÃª"""
        df = get_user_spending_data()
        if df is None:
            return "KhÃ´ng cÃ³ dá»¯ liá»‡u Ä‘á»ƒ phÃ¢n tÃ­ch!"

        try:
            # TÃ­nh Z-score Ä‘á»ƒ phÃ¡t hiá»‡n outliers
            mean_amount = df['So_tien'].mean()
            std_amount = df['So_tien'].std()

            if std_amount == 0:  # TrÃ¡nh chia cho 0
                return "âœ… KhÃ´ng cÃ³ chi tiÃªu báº¥t thÆ°á»ng nÃ o Ä‘Æ°á»£c phÃ¡t hiá»‡n!"

            df['Z_score'] = (df['So_tien'] - mean_amount) / std_amount
            anomalies = df[df['Z_score'].abs() > 2]  # Z-score > 2 lÃ  báº¥t thÆ°á»ng

            if anomalies.empty:
                return "âœ… KhÃ´ng cÃ³ chi tiÃªu báº¥t thÆ°á»ng nÃ o Ä‘Æ°á»£c phÃ¡t hiá»‡n!"

            response = "ğŸš¨ **CHI TIÃŠU Báº¤T THÆ¯á»œNG (AI):**\n\n"

            for _, anomaly in anomalies.head(3).iterrows():
                z_score = anomaly['Z_score']
                deviation = "cao" if z_score > 0 else "tháº¥p"
                response += f"â€¢ {anomaly['Ngay'].strftime('%d/%m/%Y')}: {format_currency(anomaly['So_tien'])} cho {anomaly['Danh_muc']}\n"
                response += f"  âš ï¸ Má»©c Ä‘á»™: {'Ráº¥t cao' if z_score > 3 else 'Cao'} (Z-score: {z_score:.1f})\n\n"

            return response

        except Exception as e:
            return f"âŒ Lá»—i phÃ¡t hiá»‡n báº¥t thÆ°á»ng: {str(e)}"

    def optimize_budget_recommendation():
        """Äá» xuáº¥t ngÃ¢n sÃ¡ch tá»‘i Æ°u dá»±a trÃªn lá»‹ch sá»­"""
        df = get_user_spending_data()
        if df is None or len(df) < 8:
            return "ğŸ’¡ HÃ£y thÃªm nhiá»u chi tiÃªu hÆ¡n Ä‘á»ƒ nháº­n Ä‘á» xuáº¥t ngÃ¢n sÃ¡ch tá»‘i Æ°u!"

        try:
            # PhÃ¢n tÃ­ch chi tiÃªu theo danh má»¥c
            category_stats = df.groupby('Danh_muc')['So_tien'].agg(['mean', 'count', 'std']).reset_index()
            total_mean = df['So_tien'].mean()

            response = "ğŸ’° **Äá»€ XUáº¤T NGÃ‚N SÃCH Tá»I Æ¯U:**\n\n"

            for _, category in category_stats.iterrows():
                current_avg = category['mean']
                optimal = current_avg * 0.9  # Giáº£m 10% so vá»›i trung bÃ¬nh

                if category['count'] > 3:  # Chá»‰ Ä‘á» xuáº¥t cho danh má»¥c cÃ³ Ä‘á»§ dá»¯ liá»‡u
                    savings = current_avg - optimal
                    response += f"â€¢ {category['Danh_muc']}: {format_currency(optimal)} (tiáº¿t kiá»‡m {format_currency(savings)})\n"

            monthly_saving = (category_stats['mean'].sum() * 0.1)  # Tá»•ng tiáº¿t kiá»‡m 10%
            response += f"\nğŸ¯ **Tá»•ng tiáº¿t kiá»‡m hÃ ng thÃ¡ng:** {format_currency(monthly_saving)}"

            return response

        except Exception as e:
            return f"âŒ Lá»—i Ä‘á» xuáº¥t ngÃ¢n sÃ¡ch: {str(e)}"

    def process_with_ai(message):
        """Xá»­ lÃ½ tin nháº¯n vá»›i AI thá»±c sá»±"""
        message_lower = message.lower()

        # Mapping cÃ¡c cÃ¢u há»i vá»›i chá»©c nÄƒng AI
        ai_functions = {
            'dá»± Ä‘oÃ¡n': predict_future_spending,
            'tÆ°Æ¡ng lai': predict_future_spending,
            'dá»± bÃ¡o': predict_future_spending,
            'phÃ¢n tÃ­ch': analyze_spending_patterns_ml,
            'máº«u': analyze_spending_patterns_ml,
            'báº¥t thÆ°á»ng': detect_spending_anomalies_ml,
            'outlier': detect_spending_anomalies_ml,
            'ngÃ¢n sÃ¡ch': optimize_budget_recommendation,
            'tá»‘i Æ°u': optimize_budget_recommendation,
            'tiáº¿t kiá»‡m': optimize_budget_recommendation
        }

        # TÃ¬m chá»©c nÄƒng AI phÃ¹ há»£p
        for keyword, ai_function in ai_functions.items():
            if keyword in message_lower:
                return ai_function()

        # Fallback cho cÃ¡c cÃ¢u há»i thÃ´ng thÆ°á»ng
        if any(word in message_lower for word in ["xin chÃ o", "hello", "hi", "chÃ o"]):
            return get_greeting_response()
        elif "cáº£m Æ¡n" in message_lower:
            return "ğŸ¤– KhÃ´ng cÃ³ gÃ¬! TÃ´i luÃ´n sáºµn sÃ ng há»— trá»£ báº¡n. CÃ²n gÃ¬ khÃ¡c tÃ´i cÃ³ thá»ƒ giÃºp khÃ´ng?"
        else:
            return get_ai_default_response()

    def get_greeting_response():
        """Pháº£n há»“i chÃ o há»i thÃ´ng minh"""
        df = get_user_spending_data()
        if df is not None and len(df) > 0:
            recent_spending = df['So_tien'].tail(5).mean()
            total_spent = df['So_tien'].sum()

            greetings = [
                f"Xin chÃ o {current_username}! ğŸ¤– TÃ´i Ä‘Ã£ phÃ¢n tÃ­ch {len(df)} giao dá»‹ch cá»§a báº¡n. Chi tiÃªu gáº§n Ä‘Ã¢y: {format_currency(recent_spending)}",
                f"ChÃ o báº¡n! ğŸ“Š Tá»•ng chi tiÃªu cá»§a báº¡n: {format_currency(total_spent)}. TÃ´i cÃ³ thá»ƒ giÃºp gÃ¬ thÃªm?",
                f"Hello {current_username}! ğŸ’° TÃ´i tháº¥y báº¡n cÃ³ {len(df)} giao dá»‹ch. Sáºµn sÃ ng phÃ¢n tÃ­ch chi tiÃªu!"
            ]
        else:
            greetings = [
                f"Xin chÃ o {current_username}! ğŸ¤– TÃ´i lÃ  trá»£ lÃ½ AI tÃ i chÃ­nh. HÃ£y báº¯t Ä‘áº§u thÃªm chi tiÃªu!",
                f"ChÃ o báº¡n! ğŸ“Š HÃ£y thÃªm chi tiÃªu Ä‘áº§u tiÃªn Ä‘á»ƒ tÃ´i cÃ³ thá»ƒ phÃ¢n tÃ­ch!",
                f"Hello {current_username}! ğŸ’° Sáºµn sÃ ng giÃºp báº¡n quáº£n lÃ½ tÃ i chÃ­nh!"
            ]

        import random
        return random.choice(greetings)

    def get_ai_default_response():
        """Pháº£n há»“i máº·c Ä‘á»‹nh thÃ´ng minh"""
        df = get_user_spending_data()

        if df is not None and len(df) > 10:
            suggestions = [
                "TÃ´i cÃ³ thá»ƒ **dá»± Ä‘oÃ¡n** chi tiÃªu tÆ°Æ¡ng lai cá»§a báº¡n dá»±a trÃªn dá»¯ liá»‡u hiá»‡n cÃ³!",
                "Muá»‘n tÃ´i **phÃ¢n tÃ­ch** cÃ¡c máº«u chi tiÃªu áº©n trong dá»¯ liá»‡u cá»§a báº¡n?",
                "TÃ´i cÃ³ thá»ƒ phÃ¡t hiá»‡n **chi tiÃªu báº¥t thÆ°á»ng** mÃ  báº¡n cÃ³ thá»ƒ chÆ°a nháº­n ra!",
                "Äá»ƒ tÃ´i **Ä‘á» xuáº¥t ngÃ¢n sÃ¡ch tá»‘i Æ°u** dá»±a trÃªn thÃ³i quen chi tiÃªu cá»§a báº¡n!"
            ]
        else:
            suggestions = [
                "HÃ£y thÃªm nhiá»u chi tiÃªu hÆ¡n Ä‘á»ƒ tÃ´i cÃ³ thá»ƒ phÃ¢n tÃ­ch sÃ¢u hÆ¡n!",
                "Vá»›i nhiá»u dá»¯ liá»‡u hÆ¡n, tÃ´i cÃ³ thá»ƒ dá»± Ä‘oÃ¡n xu hÆ°á»›ng chi tiÃªu cá»§a báº¡n!",
                "ThÃªm 10-15 giao dá»‹ch Ä‘á»ƒ tÃ´i phÃ¢n tÃ­ch máº«u chi tiÃªu báº±ng AI!"
            ]

        import random
        default = random.choice(suggestions)
        return f"ğŸ¤– {default}\n\nHÃ£y thá»­ má»™t trong cÃ¡c nÃºt bÃªn dÆ°á»›i Ä‘á»ƒ tráº£i nghiá»‡m AI!"

    # ========== GIAO DIá»†N NGÆ¯á»œI DÃ™NG ==========

    # BÃ‚Y GIá»œ Má»šI Äáº¶T CÃC WIDGET VÃ€ BIND EVENTS
    entry_msg.pack(side=tk.LEFT, fill=tk.X, expand=True, padx=(0, 10))
    entry_msg.bind("<Return>", lambda e: send_message())

    btn_send = tk.Button(input_frame, text="Gá»­i", command=send_message,
                         bg="#4FC3A1", fg="white", font=FONT_SUBTITLE, relief=tk.FLAT)
    btn_send.pack(side=tk.RIGHT)

    # CÃ¡c nÃºt AI thá»±c sá»±
    quick_buttons_frame = tk.Frame(chatbot_window, bg="#F0F8FF")
    quick_buttons_frame.pack(fill=tk.X, padx=20, pady=10)

    quick_questions = [
        ("ğŸ”® Dá»± Ä‘oÃ¡n tÆ°Æ¡ng lai", "dá»± Ä‘oÃ¡n chi tiÃªu"),
        ("ğŸ¯ PhÃ¢n tÃ­ch máº«u", "phÃ¢n tÃ­ch máº«u chi tiÃªu"),
        ("ğŸš¨ Báº¥t thÆ°á»ng", "phÃ¡t hiá»‡n báº¥t thÆ°á»ng"),
        ("ğŸ’° NgÃ¢n sÃ¡ch tá»‘i Æ°u", "Ä‘á» xuáº¥t ngÃ¢n sÃ¡ch")
    ]

    for i, (btn_text, question) in enumerate(quick_questions):
        btn = tk.Button(quick_buttons_frame, text=btn_text,
                        command=lambda q=question: quick_response(q),
                        bg="#6A5ACD", fg="white", font=FONT_SMALL,
                        relief=tk.FLAT, padx=10, pady=8, width=15)
        btn.grid(row=0, column=i, padx=5, sticky="ew")
        quick_buttons_frame.columnconfigure(i, weight=1)

    # Pack canvas vÃ  scrollbar
    canvas.pack(side="left", fill="both", expand=True)
    scrollbar.pack(side="right", fill="y")

    # Tin nháº¯n chÃ o má»«ng vá»›i AI
    welcome_msg = """ğŸ¤– **TRá»¢ LÃ TÃ€I CHÃNH AI THÃ”NG MINH**

TÃ´i sá»­ dá»¥ng Machine Learning Ä‘á»ƒ:
â€¢ ğŸ”® **Dá»± Ä‘oÃ¡n** chi tiÃªu tÆ°Æ¡ng lai
â€¢ ğŸ¯ **PhÃ¢n tÃ­ch máº«u** chi tiÃªu áº©n  
â€¢ ğŸš¨ **PhÃ¡t hiá»‡n báº¥t thÆ°á»ng** tá»± Ä‘á»™ng
â€¢ ğŸ’° **Äá» xuáº¥t ngÃ¢n sÃ¡ch** tá»‘i Æ°u

HÃ£y thá»­ cÃ¡c tÃ­nh nÄƒng AI báº±ng cÃ¡ch nháº­p cÃ¢u há»i hoáº·c sá»­ dá»¥ng nÃºt bÃªn dÆ°á»›i!"""

    add_message("bot", welcome_msg, is_user=False)

    # Focus vÃ o Ã´ nháº­p
    entry_msg.focus()

    return chatbot_window
